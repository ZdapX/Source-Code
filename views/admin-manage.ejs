<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REPO_MANAGER // Active Streams</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="app-container">
        <header style="margin-bottom: 5rem;">
            <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                <div>
                    <p class="mono" style="color: var(--accent);">[ ASSET_MANAGEMENT_MODE ]</p>
                    <h1>REPO_MANAGER</h1>
                </div>
                <div style="text-align: right;">
                    <p class="mono">OPERATOR: <%= adminName %></p>
                    <p class="mono" style="color: var(--zinc-400);">ACTIVE_REPOS: <%= projects.length %></p>
                </div>
            </div>
        </header>

        <main>
            <% if(projects.length === 0) { %>
                <div style="border: 1px dashed var(--zinc-800); border-radius: 4rem; padding: 6rem; text-align: center;">
                    <p class="mono" style="opacity: 0.3;">NO_DATA_STREAMS_FOUND_IN_THIS_IDENTIFIER</p>
                    <a href="/admin/upload" class="nav-link" style="margin-top: 2rem; justify-content: center;">[ INITIALIZE_FIRST_UPLOAD ]</a>
                </div>
            <% } %>

            <% projects.forEach(p => { %>
            <div class="project-card" style="cursor: default;">
                <div class="card-info">
                    <div class="card-meta">
                        <span class="badge"><%= p.language %></span>
                        <span class="mono">STATUS: STABLE</span>
                    </div>
                    <h2><%= p.name %></h2>
                </div>
                
                <div style="display: flex; gap: 4rem; align-items: center;">
                    <div class="card-stats">
                        <div class="stat-group">
                            <span class="stat-label">HITS</span>
                            <span class="stat-value"><%= p.downloads %></span>
                        </div>
                        <div class="stat-group">
                            <span class="stat-group">LIKES</span>
                            <span class="stat-value"><%= p.likes %></span>
                        </div>
                    </div>
                    
                    <a href="/admin/delete/<%= p._id %>" 
                       onclick="return confirm('WARNING: DATA PURGE IS IRREVERSIBLE. PROCEED?')"
                       style="
                            border: 1px solid var(--accent);
                            color: var(--accent);
                            padding: 0.8rem 2rem;
                            border-radius: 3rem;
                            text-decoration: none;
                            font-family: var(--font-mono);
                            font-size: 0.7rem;
                            transition: 0.3s;
                       " 
                       onmouseover="this.style.background='var(--accent)'; this.style.color='white'; this.style.boxShadow='0 0 20px var(--accent)'"
                       onmouseout="this.style.background='transparent'; this.style.color='var(--accent)'; this.style.boxShadow='none'">
                        PURGE_DATA
                    </a>
                </div>
            </div>
            <% }) %>
        </main>
    </div>

    <nav class="nav-floating">
        <a href="/admin/upload" class="nav-link">BACK_TO_UPLOAD</a>
        <a href="/" class="nav-link">TERMINATE_SESSION</a>
    </nav>
</body>
</html>
